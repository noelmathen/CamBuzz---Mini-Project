<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Posters</title>
    <style>
        /* Add any custom styling here */
        .poster-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px;
        }

        .poster-card {
            margin: 10px;
            text-align: center;
        }

        .poster-image {
            max-width: 200px;
            max-height: 300px;
        }

        .filter-container {
            margin: 20px;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

    <div class="filter-container">
        <label for="organizationFilter">Organization Name:</label>
        <select id="organizationFilter">
            <option value="">Select an organization</option>
            <option value="Abhiyanthriki">Abhiyanthriki</option>
            <option value="IEDC">IEDC</option>
            <option value="IEEE">IEEE</option>
            <option value="iTrax">iTrax</option>
            <option value="Hack Club">Hack Club</option>
            <option value="IEEE">IEEE</option>
        </select>
    
        <label for="dateFilter">Date (YYYY-MM-DD):</label>
        <input type="text" id="dateFilter" placeholder="Enter date">
    
        <button onclick="applyFilters()">Apply Filters</button>
    </div>

    <h1>Upcoming Events</h1>
    <div id="upcomingPosters" class="poster-container"></div>

    <h1>Past Events</h1>
    <div id="pastPosters" class="poster-container"></div>

    <script>
        // Function to append posters to the specified container
        function appendPosters(containerId, posters) {
            var container = $('#' + containerId);
            container.empty();

            posters.forEach(function (event) {
                var posterCard = $('<div class="poster-card"></div>');
                var posterImage = $('<img class="poster-image" src="' + event.poster + '" alt="' + event.event_name + '">');
                posterCard.append(posterImage);
                container.append(posterCard);
            });
        }

        // Function to fetch and display posters based on filters
        function applyFilters() {
            var organizationName = $('#organizationFilter').val();
            var date = $('#dateFilter').val();

            var apiUrl = 'http://127.0.0.1:8000/api/eventhub/viewevents/?organisation_name=' + organizationName + '&date=' + date;

            $.ajax({
                url: apiUrl,
                method: 'GET',
                success: function (data) {
                    appendPosters('upcomingPosters', data.upcoming_events);
                    appendPosters('pastPosters', data.past_events);
                },
                error: function (error) {
                    console.error('Error fetching data:', error);
                }
            });
        }

        // Display posters on page load (without filters)
        $(document).ready(function () {
            displayPosters();
        });
    </script>

</body>
</html>
