<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add Review</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css">
    <style>
        body {
            width: 100%;
            height: 100vh;
            margin: 0;
            background-color: #1b1b32;
            color: #f5f6f7;
            font-family: Tahoma;
            font-size: 16px;
        }

        h1,
        p {
            margin: 1em auto;
            text-align: center;
        }

        form {
            width: 60vw;
            max-width: 500px;
            min-width: 300px;
            margin: 0 auto;
            padding-bottom: 2em;
        }

        fieldset {
            border: none;
            padding: 2rem 0;
        }

        fieldset:not(:last-of-type) {
            border-bottom: 3px solid #3b3b4f;
        }

        label {
            display: block;
            margin: 0.5rem 0;
        }

        input,
        textarea,
        select {
            margin: 10px 0 0 0;
            width: 100%;
            min-height: 2em;
        }

        input,
        textarea {
            background-color: #0a0a23;
            border: 1px solid #0a0a23;
            color: #ffffff;
        }

        .inline {
            width: unset;
            margin: 0 0.5em 0 0;
            vertical-align: middle;
        }

        input[type="submit"] {
            display: block;
            width: 60%;
            margin: 1em auto;
            height: 2em;
            font-size: 1.1rem;
            background-color: #3b3b4f;
            border-color: white;
            min-width: 300px;
        }

        input[type="file"] {
            padding: 1px 2px;
        }

        a {
            color: #dfdfe2;
        }

        .profile_name {
            color: white;
        }

        .btn-circle.btn-lg {
            width: 200px;
            height: 200px;
            padding: 6px 0px;
            border-radius: 100px;
            font-size: 15px;
            text-align: center;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-sm" style="background-color: #0e1827;">
        <a class="navbar-brand" href="./mainpagefs.html"
          style="background-color: #0e1827; display: inline-block; text-align: center;">
          <img src="./img/CamBuzz_logo.png" height="50" class="d-inline-block align-top" alt=""><br />
          CamBuzz
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
          aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarText">
          <span class="navbar-text text-white text-center" style="width: 100%;">Food Spot Recommendations</span>
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
          </ul>
        </div>
        <div class="text-center" style="margin:0 10px 0 10px;">
          <img src="./img/blank_profile_pic.jpg" height="50" class="rounded-circle" alt="..."><br />
          <span class="profile_name">Rehan</span>
        </div>
      </nav>

    <h1>Add Review</h1>
    <p>Recommendation For <span id="foodSpotName"></span></p>
    <form id="addReviewForm" onsubmit="return submitForm()">
        <fieldset>
            <label for="foodRating">Food Rating:[1-5]</label>
            <input type="text" id="foodRating" name="foodRating" pattern="[1-5]" maxlength="1" required>

            <label for="serviceRating">Service Rating:[1-5]</label>
            <input type="text" id="serviceRating" name="serviceRating" pattern="[1-5]" maxlength="1" required>

            <label for="ambienceRating">Ambience Rating:[1-5]</label>
            <input type="text" id="ambienceRating" name="ambienceRating" pattern="[1-5]" maxlength="1" required>

            <label for="totalRating">Total Rating:[1-5]</label>
            <input type="text" id="totalRating" name="totalRating" pattern="[1-5]" maxlength="1" required>

            <label for="topRecommendedDish">Top Recommended Dish: <input type="text" id="topRecommendedDish" placeholder="Recommended Dish" required></label>
            <label for="reviewDescription">Review Description: <textarea id="reviewDescription" rows="3" placeholder="Describe your review..." required></textarea></label>
            <label for="photo">Upload Photographs (optional): <input type="file" id="photo" accept="image/*"></label>
        </fieldset>
        <input type="submit" value="Submit" />
    </form>

    <script src="foodSpotDetails.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const foodSpotName = getParameterByName('foodSpotName');
            document.getElementById('foodSpotName').innerText = foodSpotName;
        });

        function submitForm() {
            const foodRating = document.getElementById("foodRating").value;
            const serviceRating = document.getElementById("serviceRating").value;
            const ambienceRating = document.getElementById("ambienceRating").value;
            const totalRating = document.getElementById("totalRating").value;
            const topRecommendedDish = document.getElementById("topRecommendedDish").value;
            const reviewDescription = document.getElementById("reviewDescription").value;
            const photo = document.getElementById("photo").value;

            // Validate form fields (add more validation as needed)
            if (!foodRating || !serviceRating || !ambienceRating || !totalRating || !topRecommendedDish || !reviewDescription) {
                alert("Please fill in all required fields.");
                return false;
            }

            // Perform any other actions before submitting (e.g., API calls, data processing)

            // Example: Display review details using the script
            displayReviewDetails(foodRating, serviceRating, ambienceRating, totalRating, topRecommendedDish, reviewDescription, photo);

            // Clear the form fields
            document.getElementById("foodRating").value = "1";
            document.getElementById("serviceRating").value = "1";
            document.getElementById("ambienceRating").value = "1";
            document.getElementById("totalRating").value = "1";
            document.getElementById("topRecommendedDish").value = "";
            document.getElementById("reviewDescription").value = "";
            document.getElementById("photo").value = ""; // Reset file input

            // Prevent form submission
            return false;
        }

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function displayReviewDetails(foodRating, serviceRating, ambienceRating, totalRating, topRecommendedDish, reviewDescription, photo) {
            // You can implement how you want to display the review details
            // For example, you can append the details to the reviews section on the food details page
            // or make an API call to store the review details

            // For now, let's log the details to the console
            console.log("Food Rating:", foodRating);
            console.log("Service Rating:", serviceRating);
            console.log("Ambience Rating:", ambienceRating);
            console.log("Total Rating:", totalRating);
            console.log("Top Recommended Dish:", topRecommendedDish);
            console.log("Review Description:", reviewDescription);
            console.log("Photo:", photo);
        }
    </script>
</body>

</html>
